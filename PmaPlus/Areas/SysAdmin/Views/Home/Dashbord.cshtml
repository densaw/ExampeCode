@{
    ViewBag.Title = "PMA+";
    Layout = "~/Areas/SysAdmin/Views/Shared/_AdminLayout.cshtml";
}

<div class="wrapper wrapper-content">
<div class="row" ng-controller="ChartController">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Player Clients</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <a>
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content">
                <div ng-controller="AllPlayerController">
                    <span class="pull-right text-right">
                            <small>Registered players within last 12 months in: <strong>United Kingdom</strong></small>
                            <br>
                            Active Players: {{playerCount}}  -  Est. Revenue: £{{playerCount * targets.value}}
                        </span>
                        <h1 style="margin-bottom: 0px; margin-top: 10px; ">Registered Players</h1>
                        <small>Total players within system</small>
                   
                </div>
                <div style="margin-top: 20px; ">
                    <canvas tc-chartjs chart-type="line" chart-data="data" chart-options="options" height="70"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-lg-3" ng-controller="PlayersBoxController">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <span class="label label-primary pull-right">Week</span>
                <h5>Players Logins</h5>
            </div>
            <div class="ibox-content" ng-switch on="progressPlayer">
                <h1 class="no-margins">{{amountPlayers}}</h1>
                <div ng-switch-when="up" class="stat-percent font-bold-small text-warning">
                    {{percentage}}%&nbsp;<i class="fa fa-arrow-circle-o-up"></i>
                </div>
                <div ng-switch-when="down" class="stat-percent font-bold-small text-warning">
                    {{percentage}}%&nbsp;<i class="fa fa-arrow-circle-o-down"></i>
                </div>
                <div ng-switch-default class="stat-percent font-bold-small text-warning">
                    {{percentage}}%&nbsp;<i class="fa fa-arrow-circle-o-left"></i>
                </div>
                <small>Last week </small>
            </div>
        </div>
    </div>
    <div class="col-lg-3" ng-controller="CoachsBoxController">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <span class="label label-primary pull-right">Week</span>
                <h5>Coach Logins</h5>
            </div>
            <div class="ibox-content" ng-switch on="progressCoach">
                <h1 class="no-margins">{{amountCoaches}}</h1>
                <div ng-switch-when="up" class="stat-percent font-bold-small text-warning">
                    {{percentage}}%&nbsp;<i class="fa fa-arrow-circle-o-up"></i>
                </div>
                <div ng-switch-when="down" class="stat-percent font-bold-small text-warning">
                    {{percentage}}%&nbsp;<i class="fa fa-arrow-circle-o-down"></i>
                </div>
                <div ng-switch-default class="stat-percent font-bold-small text-warning">
                    {{percentage}}%&nbsp;<i class="fa fa-arrow-circle-o-left"></i>
                </div>
                <small>Last week </small>
            </div>
        </div>
    </div>
    <div class="col-lg-3" ng-controller="ClubsBoxController">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <span class="label label-primary pull-right">Week</span>
                <h5>Club Logins</h5>
            </div>
            <div class="ibox-content" ng-switch on="progressClub">
                <h1 class="no-margins">{{amountClubs}}</h1>
                <div ng-switch-when="up" class="stat-percent font-bold-small text-warning">
                    {{percentage}}%&nbsp;<i class="fa fa-arrow-circle-o-up"></i>
                </div>
                <div ng-switch-when="down" class="stat-percent font-bold-small text-warning">
                    {{percentage}}%&nbsp;<i class="fa fa-arrow-circle-o-down"></i>
                </div>
                <div ng-switch-default class="stat-percent font-bold-small text-warning">
                    {{percentage}}%&nbsp;<i class="fa fa-arrow-circle-o-left"></i>
                </div>
                <small>Last week </small>
            </div>
        </div>
    </div>
    <div class="col-lg-3" ng-controller="UsersBoxController">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <span class="label label-primary pull-right">Week</span>
                <h5>All Logins</h5>
            </div>
            <div class="ibox-content" ng-switch on="progressUser">
                <h1 class="no-margins">{{amountUsers}}</h1>
                <div ng-switch-when="up" class="stat-percent font-bold-small text-warning">
                    {{percentage}}%&nbsp;<i class="fa fa-arrow-circle-o-up"></i>
                </div>
                <div ng-switch-when="down" class="stat-percent font-bold-small text-warning">
                    {{percentage}}%&nbsp;<i class="fa fa-arrow-circle-o-down"></i>
                </div>
                <div ng-switch-default class="stat-percent font-bold-small text-warning">
                    {{percentage}}%&nbsp;<i class="fa fa-arrow-circle-o-left"></i>
                </div>
                <small>Last week </small>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-3">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Player Login History</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <a>
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content no-padding" style="display: block;">
                <div class="text-center m">
                    <span id="playersLoginHistory">Loading..</span>
                </div>
            </div>
        </div>

    </div>

</div>
<div class="row">
    <div class="col-lg-3">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Club Login History</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <a>
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content no-padding" style="display: block;">
                <div class="text-center m">
                    <span id="clubLoginHistory">Loading..</span>
                </div>
            </div>
        </div>

    </div>

</div>
<div class="row">
    <div class="col-lg-3">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Coach Login History</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <a>
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content no-padding" style="display: block;">
                <div class="text-center m">
                    <span id="coachLoginHistory">Loading..</span>
                </div>
            </div>
        </div>

    </div>

</div>
<div class="row">
    <div class="col-lg-3">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>All Logins</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <a>
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content no-padding" style="display: block;">
                <div class="text-center m">
                    <span id="playerLogins">Loading..</span>
                </div>
            </div>
        </div>

    </div>

</div>
</div>
<script>
    var barSettings = {
        type: 'bar',
        barWidth: 10,
        height: '150px',
        barColor: '#428BCA',
        negBarColor: '#4D99DB'
    };

    $(function () {
        $.ajax({
            type: 'GET',
            url: 'api/dashboard/logged/players/15/weeks',
            success: function (data, success) {
                $('#playersLoginHistory').sparkline(data, barSettings);
            }
        });

        $.ajax({
            type: 'GET',
            url: 'api/dashboard/logged/clubs/15/weeks',
            success: function (data, success) {
                $('#clubLoginHistory').sparkline(data, barSettings);
            }
        });

        $.ajax({
            type: 'GET',
            url: 'api/dashboard/logged/coaches/15/weeks',
            success: function (data, success) {
                $('#coachLoginHistory').sparkline(data, barSettings);
            }
        });

        $.ajax({
            type: 'GET',
            url: 'api/dashboard/logged/users/15/weeks',
            success: function (data, success) {
                $('#playerLogins').sparkline(data, barSettings);
            }
        });
    });

</script>


